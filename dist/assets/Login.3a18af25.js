import{r as o,u as S,c as N,b as x,a as e,j as t,a5 as L,Q as c,a9 as w,L as k}from"./index.6c9b87f9.js";import{i as E}from"./a.3a9325f7.js";import{m as C}from"./motion.08662943.js";import{I as f}from"./index.6f1cfc5f.js";import{S as d}from"./index.c84aba24.js";import"./type.d47588eb.js";import"./index.c816b7fc.js";import"./Compact.2f55ebc9.js";import"./button.9d20bfc0.js";import"./motion.04f77c3d.js";import"./slide.138704b1.js";import"./pickAttrs.912e100a.js";import"./CloseOutlined.11b2fdea.js";import"./PurePanel.177a57f8.js";const F=()=>{const[u,m]=o.exports.useState(""),[s,p]=o.exports.useState(""),[l,h]=o.exports.useState(""),[v,i]=o.exports.useState(!1),{isvalid:b}=S(a=>a.user),g=N(),n=x();o.exports.useEffect(()=>{const a=()=>{b&&(n("/"),c.error("Already Login"))};return()=>a()},[n]);const y=()=>{i(!0);try{w(s,l,u).then(a=>{a!=null&&a.data.data&&(g({type:"login",payload:a==null?void 0:a.data}),c.success("Login Successfully"),localStorage.setItem("token",a==null?void 0:a.data.data.token),p(""),h(""),m(""),k(a==null?void 0:a.data.data.token).then(r=>{g({type:"load",payload:r==null?void 0:r.data}),n("/")})),i(!1)}).catch(a=>{c.error(a),console.log(a),i(!1)})}catch(a){console.log(a),i(!1)}};return e("div",{className:"login",children:t(C.div,{initial:{x:-150,opacity:0,scale:.5},whileInView:{x:0,opacity:1,scale:1},viewport:{once:!1,amount:.3},transition:{type:"spring",bounce:.2,duration:.4},className:"card",children:[e("div",{className:"left",children:e("img",{src:E,alt:"sssa"})}),t("div",{className:"right",children:[v?e("h4",{className:"danger",children:"Loading..."}):e("h4",{children:"Login"}),t("div",{children:[e("label",{children:"Email"}),e(f,{value:s,onChange:a=>p(a.target.value),className:"input",placeholder:"Enter your register Email"})]}),t("div",{children:[e("label",{children:"Password"}),e(f.Password,{value:l,onChange:a=>h(a.target.value),className:"input",placeholder:"Enter your register Password"})]}),t("div",{children:[e("label",{children:"Role "}),t(d,{className:"input",onChange:a=>m(a),style:{width:"100%",marginTop:"0.5rem"},placeholder:"Select Role of Authorization",children:[e(d.Option,{value:"user",children:"User"}),e(d.Option,{value:"subuser",children:"Sub User"})]})]}),e("button",{style:{cursor:"pointer"},disabled:s===""||l===""||u==="",onClick:y,className:"login-btn",children:"Submit"}),e(L,{to:"/register",className:"link",children:"Don't have an Account ?"})]})]})})};export{F as default};
