import{r as o,u as b,c as N,b as x,Q as c,a as e,j as t,a5 as L,a9 as w,L as k}from"./index.e9af910d.js";import{i as E}from"./a.3a9325f7.js";import{m as C}from"./motion.6f968c24.js";import{I as v}from"./index.1d499a92.js";import{S as d}from"./index.7a6b52e2.js";import"./type.a5bb541a.js";import"./index.26be1942.js";import"./Compact.520a2efa.js";import"./button.b54c2637.js";import"./motion.bfcbfacc.js";import"./slide.264f3c07.js";import"./pickAttrs.03ce5f75.js";import"./CloseOutlined.f75c15b1.js";import"./PurePanel.4077787d.js";const F=()=>{const[m,p]=o.exports.useState(""),[l,u]=o.exports.useState(""),[s,h]=o.exports.useState(""),[y,i]=o.exports.useState(!1),{isvalid:g}=b(a=>a.user),f=N(),n=x();o.exports.useEffect(()=>{g&&(n("/"),c.error("Already Login"))},[n,g]);const S=()=>{i(!0);try{w(l,s,m).then(a=>{a!=null&&a.data.data&&(f({type:"login",payload:a==null?void 0:a.data}),c.success("Login Successfully"),localStorage.setItem("token",a==null?void 0:a.data.data.token),u(""),h(""),p(""),k(a==null?void 0:a.data.data.token).then(r=>{f({type:"load",payload:r==null?void 0:r.data}),n("/")})),i(!1)}).catch(a=>{c.error(a),console.log(a),i(!1)})}catch(a){console.log(a),i(!1)}};return e("div",{className:"login",children:t(C.div,{initial:{x:-150,opacity:0,scale:.5},whileInView:{x:0,opacity:1,scale:1},viewport:{once:!1,amount:.3},transition:{type:"spring",bounce:.2,duration:.4},className:"card",children:[e("div",{className:"left",children:e("img",{src:E,alt:"sssa"})}),t("div",{className:"right",children:[y?e("h4",{className:"danger",children:"Loading..."}):e("h4",{children:"Login"}),t("div",{children:[e("label",{children:"Email"}),e(v,{value:l,onChange:a=>u(a.target.value),className:"input",placeholder:"Enter your register Email"})]}),t("div",{children:[e("label",{children:"Password"}),e(v.Password,{value:s,onChange:a=>h(a.target.value),className:"input",placeholder:"Enter your register Password"})]}),t("div",{children:[e("label",{children:"Role "}),t(d,{className:"input",onChange:a=>p(a),style:{width:"100%",marginTop:"0.5rem"},placeholder:"Select Role of Authorization",children:[e(d.Option,{value:"user",children:"User"}),e(d.Option,{value:"subuser",children:"Sub User"})]})]}),e("button",{style:{cursor:"pointer"},disabled:l===""||s===""||m==="",onClick:S,className:"login-btn",children:"Submit"}),e(L,{to:"/register",className:"link",children:"Don't have an Account ?"})]})]})})};export{F as default};
